<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.61">
<title data-react-helmet="true">Stacks | VKPR</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Stacks | VKPR"><meta data-react-helmet="true" name="description" content="Ingress stack"><meta data-react-helmet="true" property="og:description" content="Ingress stack"><meta data-react-helmet="true" property="og:url" content="https://vertigobr.github.io/vkpr-docs/docs/stacks"><link data-react-helmet="true" rel="shortcut icon" href="https://vertigo.com.br/wp-content/uploads/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://vertigobr.github.io/vkpr-docs/docs/stacks"><link rel="stylesheet" href="/vkpr-docs/styles.41ae9df5.css">
<link rel="preload" href="/vkpr-docs/styles.4408798e.js" as="script">
<link rel="preload" href="/vkpr-docs/runtime~main.0d11be9f.js" as="script">
<link rel="preload" href="/vkpr-docs/main.b5aedc86.js" as="script">
<link rel="preload" href="/vkpr-docs/1.308bc0ca.js" as="script">
<link rel="preload" href="/vkpr-docs/2.6f98a7af.js" as="script">
<link rel="preload" href="/vkpr-docs/17.b2dbcb07.js" as="script">
<link rel="preload" href="/vkpr-docs/332e3bbb.32069493.js" as="script">
<link rel="preload" href="/vkpr-docs/17896441.21051314.js" as="script">
<link rel="preload" href="/vkpr-docs/93eace6c.1854d9c0.js" as="script">
</head>
<body>
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top navbarHideable_3046"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/vkpr-docs/"><img class="navbar__logo" src="/vkpr-docs/img/vtg-dark.svg" alt="Vertigo logo"><strong class="navbar__title">VKPR</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/vkpr-docs/docs/">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/vertigobr/vkpr" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx" style="background:url(&quot;data:image/svg+xml;charset=utf-8,%3Csvg viewBox=&#x27;0 0 24 24&#x27; xmlns=&#x27;http://www.w3.org/2000/svg&#x27;%3E%3Cpath fill=&#x27;white&#x27; d=&#x27;M12,11.807C9.349,9.155,8.7,5.261,10.049,2c-1.875,0.37-3.666,1.281-5.12,2.735c-3.905,3.905-3.905,10.237,0,14.142	c3.906,3.906,10.237,3.905,14.143,0c1.454-1.454,2.364-3.244,2.735-5.119C18.545,15.106,14.651,14.458,12,11.807z&#x27;/%3E%3C/svg%3E&quot;);width:16px;height:16px;margin-left:-2px;margin-top:-3px"> </span></div><div class="react-toggle-track-x"><span class="toggle_BsTx" style="background:url(&quot;data:image/svg+xml;charset=utf-8,%3Csvg viewBox=&#x27;0 0 24 24&#x27; xmlns=&#x27;http://www.w3.org/2000/svg&#x27;%3E%3Cpath fill=&#x27;white&#x27; d=&#x27;M6.995 12c0 2.761 2.246 5.007 5.007 5.007s5.007-2.246 5.007-5.007-2.246-5.007-5.007-5.007S6.995 9.239 6.995 12zM11 19H13V22H11zM11 2H13V5H11zM2 11H5V13H2zM19 11H22V13H19z&#x27;/%3E%3Cpath fill=&#x27;white&#x27; transform=&#x27;rotate(-134.999 5.99 18.01)&#x27; d=&#x27;M4.989 16.51H6.989V19.51H4.989z&#x27;/%3E%3Cpath fill=&#x27;white&#x27; transform=&#x27;rotate(-45.001 18.01 5.99)&#x27; d=&#x27;M16.51 4.99H19.511000000000003V6.99H16.51z&#x27;/%3E%3Cpath fill=&#x27;white&#x27; transform=&#x27;rotate(-134.983 5.99 5.99)&#x27; d=&#x27;M4.489 4.99H7.489V6.99H4.489z&#x27;/%3E%3Cpath fill=&#x27;white&#x27; transform=&#x27;rotate(134.999 18.01 18.01)&#x27; d=&#x27;M17.01 16.51H19.01V19.511000000000003H17.01z&#x27;/%3E%3C/svg%3E&quot;);width:16px;height:16px;margin-left:-1px;margin-top:-3px"> </span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/vkpr-docs/"><img class="navbar__logo" src="/vkpr-docs/img/vtg-dark.svg" alt="Vertigo logo"><strong class="navbar__title">VKPR</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/vkpr-docs/docs/">Docs</a></li><li class="menu__list-item"><a href="https://github.com/vertigobr/vkpr" target="_blank" rel="noopener noreferrer" class="menu__link header-github-link" aria-label="GitHub repository"></a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC sidebarWithHideableNavbar_2IoJ"><a tabindex="-1" class="sidebarLogo_Snse" href="/vkpr-docs/"><img src="/vkpr-docs/img/vtg-dark.svg" alt="Vertigo logo"><strong>VKPR</strong></a><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">VKPR</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/vkpr-docs/docs/">Introduction</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/vkpr-docs/docs/stacks">Stacks</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/vkpr-docs/docs/roadmap">Roadmap</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/vkpr-docs/docs/faq">FAQ</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!">Getting Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/vkpr-docs/docs/quickstart">Quickstart</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/vkpr-docs/docs/velero-setup">Velero Setup</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Amazon EKS</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/vkpr-docs/docs/eks/installation">Installation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/vkpr-docs/docs/eks/velero-setup">Velero Setup</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Digital Ocean</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/vkpr-docs/docs/digital-ocean/installation">Installation</a></li></ul></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Stacks</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="ingress-stack"></a>Ingress stack<a aria-hidden="true" tabindex="-1" class="hash-link" href="#ingress-stack" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="nginx-ingress-controller"></a>NGINX Ingress Controller<a aria-hidden="true" tabindex="-1" class="hash-link" href="#nginx-ingress-controller" title="Direct link to heading">#</a></h3><p><a href="https://github.com/kubernetes/ingress-nginx" target="_blank" rel="noopener noreferrer">ingress-nginx</a> is an Ingress controller for Kubernetes using NGINX as a reverse proxy and load balancer.</p><p>Ingress exposes HTTP and HTTPS routes from outside the cluster to services within the cluster. An Ingress resource supports exposing services and configuring TLS termination for each exposed host name.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="implementation"></a>Implementation<a aria-hidden="true" tabindex="-1" class="hash-link" href="#implementation" title="Direct link to heading">#</a></h4><p>By default the <strong>NGINX Ingress Controller</strong> is enabled in <em>VKPR</em> installation. An example of configuration :</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-yaml codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token key atrule">nginx-ingress</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">enabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">controller</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">publishService</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">enabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">autoscaling</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">enabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">minReplicas</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">maxReplicas</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3</span></div></div></div></div></div><p>To see more configurations, access the <a href="https://github.com/helm/charts/tree/master/stable/nginx-ingress#configuration" target="_blank" rel="noopener noreferrer">documentation</a>. </p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="externaldns"></a>ExternalDNS<a aria-hidden="true" tabindex="-1" class="hash-link" href="#externaldns" title="Direct link to heading">#</a></h3><p><a href="https://github.com/kubernetes-sigs/external-dns" target="_blank" rel="noopener noreferrer">ExternalDNS</a> is a Kubernetes addon that configures public DNS servers with information about exposed Kubernetes services to make them discoverable.</p><p>Inspired by <a href="https://github.com/kubernetes/dns" target="_blank" rel="noopener noreferrer">Kubernetes DNS</a>, Kubernetes&#x27; cluster-internal DNS server, ExternalDNS makes Kubernetes resources discoverable via public DNS servers. Like KubeDNS, it retrieves a list of resources (Services, Ingresses, etc.) from the <a href="https://kubernetes.io/docs/concepts/overview/kubernetes-api/" target="_blank" rel="noopener noreferrer">Kubernetes API</a> to determine a desired list of DNS records. Unlike KubeDNS, however, it&#x27;s not a DNS server itself, but merely configures other DNS providers accordingly—e.g. <a href="https://aws.amazon.com/route53/" target="_blank" rel="noopener noreferrer">AWS Route 53</a> or <a href="https://cloud.google.com/dns/docs/" target="_blank" rel="noopener noreferrer">Google Cloud DNS</a>.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="implementation-1"></a>Implementation<a aria-hidden="true" tabindex="-1" class="hash-link" href="#implementation-1" title="Direct link to heading">#</a></h4><p>By default the <strong>ExternalDNS</strong> is disabled in <em>VKPR</em> installation. An example of configuration:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-yaml codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token key atrule">external-dns</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">enabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">rbac</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">create</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">sources</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> ingress</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> service</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">provider</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> digitalocean</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">interval</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;1m&quot;</span></div></div></div></div></div><p>To see more configurations, access the <a href="https://github.com/bitnami/charts/tree/master/bitnami/external-dns#parameters" target="_blank" rel="noopener noreferrer">documentation</a>. </p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="logging-stack"></a>Logging stack<a aria-hidden="true" tabindex="-1" class="hash-link" href="#logging-stack" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="loki"></a>Loki<a aria-hidden="true" tabindex="-1" class="hash-link" href="#loki" title="Direct link to heading">#</a></h3><p><a href="https://github.com/grafana/loki" target="_blank" rel="noopener noreferrer">Loki</a> is a horizontally-scalable, highly-available, multi-tenant log aggregation system inspired by <a href="https://prometheus.io/" target="_blank" rel="noopener noreferrer">Prometheus</a>. It is designed to be very cost effective and easy to operate. It does not index logs content, but rather a set of labels for each log stream.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="implementation-2"></a>Implementation<a aria-hidden="true" tabindex="-1" class="hash-link" href="#implementation-2" title="Direct link to heading">#</a></h4><p>By default the <strong>Loki</strong> is enabled in <em>VKPR</em> installation. An example of configuration:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-yaml codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token key atrule">loki-stack</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">enabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">serviceScheme</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> https</span></div></div></div></div></div><p>To see more configurations, access the <a href="https://github.com/grafana/loki/tree/master/production/helm" target="_blank" rel="noopener noreferrer">documentation</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="monitoring-stack"></a>Monitoring stack<a aria-hidden="true" tabindex="-1" class="hash-link" href="#monitoring-stack" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="prometheus-operator"></a>Prometheus Operator<a aria-hidden="true" tabindex="-1" class="hash-link" href="#prometheus-operator" title="Direct link to heading">#</a></h3><p><a href="https://github.com/coreos/prometheus-operator" target="_blank" rel="noopener noreferrer">Prometheus Operator</a> provides Kubernetes native deployment and management of <a href="https://prometheus.io/" target="_blank" rel="noopener noreferrer">Prometheus</a> and related monitoring components. The purpose of this project is to simplify and automate the configuration of a Prometheus based monitoring stack for Kubernetes clusters.</p><p>Prometheus Operator contains the following modules:</p><ul><li><p><strong><a href="https://github.com/grafana/grafana" target="_blank" rel="noopener noreferrer">Grafana</a></strong> allows you to query, visualize, alert on and understand your metrics no matter where they are stored.</p></li><li><p><strong><a href="https://prometheus.io/" target="_blank" rel="noopener noreferrer">Prometheus</a></strong> scrapes metrics from instrumented jobs, either directly or via an intermediary push gateway for short-lived jobs. It stores all scraped samples locally and runs rules over this data to either aggregate and record new time series from existing data or generate alerts.</p></li><li><p><strong><a href="https://github.com/prometheus/alertmanager" target="_blank" rel="noopener noreferrer">Alertmanager</a></strong> handles alerts sent by client applications such as the Prometheus server. It takes care of deduplicating, grouping, and routing them to the correct receiver integrations such as email, PagerDuty, or OpsGenie. It also takes care of silencing and inhibition of alerts.</p></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="implementation-3"></a>Implementation<a aria-hidden="true" tabindex="-1" class="hash-link" href="#implementation-3" title="Direct link to heading">#</a></h4><p>By default the <strong>Prometheus Operator</strong> is enabled in <em>VKPR</em> installation. An example of configuration:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-yaml codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token key atrule">prometheus-operator</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">enabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">prometheusOperator</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">createCustomResource</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">false</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">grafana</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">adminPassword</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;password&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">ingress</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">enabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">annotations</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">kubernetes.io/ingress.class</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> nginx</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">kubernetes.io/tls-acme</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;true&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">hosts</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;grafana.whoami.com&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span></div></div></div></div></div><p>To see more configurations, access the <a href="https://github.com/helm/charts/tree/master/stable/prometheus-operator#general" target="_blank" rel="noopener noreferrer">documentation</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="security-stack"></a>Security stack<a aria-hidden="true" tabindex="-1" class="hash-link" href="#security-stack" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="cert-manager"></a>cert-manager<a aria-hidden="true" tabindex="-1" class="hash-link" href="#cert-manager" title="Direct link to heading">#</a></h3><p><a href="https://github.com/jetstack/cert-manager" target="_blank" rel="noopener noreferrer">cert-manager</a> is a Kubernetes addon to automate the management and issuance of TLS certificates from various issuing sources.</p><p>It will ensure certificates are valid and up to date periodically, and attempt to renew certificates at an appropriate time before expiry.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="implementation-4"></a>Implementation<a aria-hidden="true" tabindex="-1" class="hash-link" href="#implementation-4" title="Direct link to heading">#</a></h4><p>By default the <strong>cert-manager</strong> is disabled in <em>VKPR</em> installation. An example of configuration:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-yaml codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token key atrule">cert-manager</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">enabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">ingressShim</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">defaultIssuerName</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> letsencrypt</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">production</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">defaultIssuerKind</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> ClusterIssuer</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">defaultIssuerGroup</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> cert</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">manager.io</span></div></div></div></div></div><p>To see more configurations, access the <a href="https://github.com/jetstack/cert-manager/blob/master/deploy/charts/cert-manager/README.template.md#configuration" target="_blank" rel="noopener noreferrer">documentation</a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="vault"></a>Vault<a aria-hidden="true" tabindex="-1" class="hash-link" href="#vault" title="Direct link to heading">#</a></h3><p><a href="https://github.com/hashicorp/vault" target="_blank" rel="noopener noreferrer">Vault</a> is a tool for securely accessing secrets. A secret is anything that you want to tightly control access to, such as API keys, passwords, certificates, and more. Vault provides a unified interface to any secret, while providing tight access control and recording a detailed audit log.</p><p>A modern system requires access to a multitude of secrets: database credentials, API keys for external services, credentials for service-oriented architecture communication, etc. Understanding who is accessing what secrets is already very difficult and platform-specific. Adding on key rolling, secure storage, and detailed audit logs is almost impossible without a custom solution. </p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="implementation-5"></a>Implementation<a aria-hidden="true" tabindex="-1" class="hash-link" href="#implementation-5" title="Direct link to heading">#</a></h4><p>By default the <strong>Vault</strong> is disabled in <em>VKPR</em> installation. An example of configuration:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-yaml codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token key atrule">vault</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">enabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">server</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">ha</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">enabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">raft</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">enabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span></div></div></div></div></div><p>To see more configurations, access the <a href="https://github.com/hashicorp/vault-helm" target="_blank" rel="noopener noreferrer">documentation</a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="keycloak"></a>Keycloak<a aria-hidden="true" tabindex="-1" class="hash-link" href="#keycloak" title="Direct link to heading">#</a></h3><p><a href="https://github.com/keycloak/keycloak" target="_blank" rel="noopener noreferrer">Keycloak</a> is an Open Source Identity and Access Management solution for modern Applications and Services.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="implementation-6"></a>Implementation<a aria-hidden="true" tabindex="-1" class="hash-link" href="#implementation-6" title="Direct link to heading">#</a></h4><p>By default the <strong>Keycloak</strong> is disabled in <em>VKPR</em> installation. An example of configuration:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-yaml codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token key atrule">keycloak</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">enabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">keycloak</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">username</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> keycloak</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">password</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> admin123</span></div></div></div></div></div><p>To view more configuration, access the <a href="https://github.com/codecentric/helm-charts/tree/master/charts/keycloak#configuration" target="_blank" rel="noopener noreferrer">documentation</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="backup-stack"></a>Backup stack<a aria-hidden="true" tabindex="-1" class="hash-link" href="#backup-stack" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="velero"></a>Velero<a aria-hidden="true" tabindex="-1" class="hash-link" href="#velero" title="Direct link to heading">#</a></h3><p><a href="https://github.com/vmware-tanzu/velero" target="_blank" rel="noopener noreferrer">Velero</a> gives you tools to back up and restore your Kubernetes cluster resources and persistent volumes.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="implementation-7"></a>Implementation<a aria-hidden="true" tabindex="-1" class="hash-link" href="#implementation-7" title="Direct link to heading">#</a></h4><p>By default <strong>Velero</strong> is disabled in <em>VKPR</em> installation. An example of configuration:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-yaml codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token key atrule">velero</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">enabled</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token boolean important" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">initContainers</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> velero</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">plugin</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">for</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">aws</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> velero/velero</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">plugin</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">for</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">aws</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">v1.0.0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">imagePullPolicy</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> IfNotPresent</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">volumeMounts</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain"> </span><span class="token key atrule">mountPath</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> /target</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token key atrule">name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> plugins</span></div></div></div></div></div><p>To see more configurations, access the <a href="https://github.com/vmware-tanzu/helm-charts/tree/main/charts/velero" target="_blank" rel="noopener noreferrer">documentation</a>.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/vertigobr/vkpr/edit/docs/docs/stacks.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/vkpr-docs/docs/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Introduction</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/vkpr-docs/docs/roadmap"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Roadmap »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3klQ"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#ingress-stack" class="table-of-contents__link">Ingress stack</a><ul><li><a href="#nginx-ingress-controller" class="table-of-contents__link">NGINX Ingress Controller</a></li><li><a href="#externaldns" class="table-of-contents__link">ExternalDNS</a></li></ul></li><li><a href="#logging-stack" class="table-of-contents__link">Logging stack</a><ul><li><a href="#loki" class="table-of-contents__link">Loki</a></li></ul></li><li><a href="#monitoring-stack" class="table-of-contents__link">Monitoring stack</a><ul><li><a href="#prometheus-operator" class="table-of-contents__link">Prometheus Operator</a></li></ul></li><li><a href="#security-stack" class="table-of-contents__link">Security stack</a><ul><li><a href="#cert-manager" class="table-of-contents__link">cert-manager</a></li><li><a href="#vault" class="table-of-contents__link">Vault</a></li><li><a href="#keycloak" class="table-of-contents__link">Keycloak</a></li></ul></li><li><a href="#backup-stack" class="table-of-contents__link">Backup stack</a><ul><li><a href="#velero" class="table-of-contents__link">Velero</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/vkpr-docs/docs/">Introduction</a></li><li class="footer__item"><a class="footer__link-item" href="/vkpr-docs/docs/stacks/">Stacks</a></li><li class="footer__item"><a class="footer__link-item" href="/vkpr-docs/docs/roadmap/">Roadmap</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://www.facebook.com/vertigo.tecnologia" target="_blank" rel="noopener noreferrer" class="footer__link-item">Facebook</a></li><li class="footer__item"><a href="https://www.linkedin.com/company/vertigo-tecnologia/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/vertigobr/vkpr" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="text--center"><div class="margin-bottom--sm"><img class="footer__logo" alt="Vertigo Tecnologia Logo" src="https://vertigo.com.br/wp-content/uploads/logo-vertigo-fundopreto.png"></div><div>Copyright © 2020 Vertigo Tecnologia</div></div></div></footer></div>
<script src="/vkpr-docs/styles.4408798e.js"></script>
<script src="/vkpr-docs/runtime~main.0d11be9f.js"></script>
<script src="/vkpr-docs/main.b5aedc86.js"></script>
<script src="/vkpr-docs/1.308bc0ca.js"></script>
<script src="/vkpr-docs/2.6f98a7af.js"></script>
<script src="/vkpr-docs/17.b2dbcb07.js"></script>
<script src="/vkpr-docs/332e3bbb.32069493.js"></script>
<script src="/vkpr-docs/17896441.21051314.js"></script>
<script src="/vkpr-docs/93eace6c.1854d9c0.js"></script>
</body>
</html>